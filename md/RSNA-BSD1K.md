# RSNA-BSD1K 数据集

> **作者/来源**：RSNA (Radiological Society of North America)  
> **机构**：北美放射学会  
> **发布时间**：2017年  
> **数据集地址**：[RSNA官方](https://www.rsna.org/)  
> **任务类型**：乳腺癌检测挑战赛  

---

## 一、简介

**RSNA-BSD1K** 是一个用于乳腺癌病灶检测的医学影像数据集，来源于RSNA乳腺癌检测挑战赛。该数据集包含**1,000余张乳腺X线摄影图像**，专注于恶性病灶的检测与定位。

检测类别：
- **mal**：恶性病灶（Malignant lesions）

标注信息以**边界框（bounding box）**形式提供，采用COCO格式存储，支持乳腺癌自动检测与诊断辅助系统的开发，适用于医学图像目标检测、计算机辅助诊断等任务。

---

## 二、数据组成

### 1. **元信息**
| 维度 | 模态 | 任务类型 | 解剖结构 | 解剖区域 | 类别数 | 数据量 | 文件格式 |
|------|------|----------|----------|----------|--------|--------|----------|
| 2D | X-ray | 目标检测（Object Detection） | 乳腺 | 乳腺组织 | 1 | 1,000+ | PNG |

### 2. **图像尺寸统计**
- **宽度范围**：957 - 2,458 像素
- **高度范围**：1,147 - 2,964 像素
- **平均尺寸**：1,595 × 1,942 像素
- **颜色模式**：RGB (3通道)
- **平均文件大小**：1.6 MB

### 3. **标签信息统计**
| 类别名称 | 类别ID | 描述 | 标注数量 |
|----------|--------|------|----------|
| mal | 1 | 恶性病灶 | 222 |

### 4. **数据分布**

#### **原始COCO格式分布**
| 数据集 | 标注中图像数 | 实际图像数 | 标注数量 | 平均每图标注 |
|--------|-------------|-----------|----------|-------------|
| 训练集 (full2017) | 993 | 993 | 203 | 0.20 |
| 验证集 (val2017) | 107 | 19 | 19 | 1.00 |
| **总计** | **1,100** | **1,012** | **222** | **0.22** |

#### **转换后YOLO格式分布（8:1:1划分）**
| 数据集 | 图像数量 | 有标注图像 | 无标注图像 | 标注数量 | 平均每图标注 |
|--------|----------|-----------|-----------|----------|-------------|
| 训练集 (train) | 794 | 150 | 644 | 150 | 0.19 |
| 验证集 (val) | 99 | 19 | 80 | 19 | 0.19 |
| 测试集 (test) | 100 | 19 | 81 | 19 | 0.19 |
| **总计** | **993** | **188** | **805** | **188** | **0.19** |

> **注意事项**：
> - 原始验证集中只有19张实际图像文件可用
> - YOLO格式转换采用分层抽样，保持标注分布平衡
> - 约19%的图像包含恶性病灶标注，符合实际临床分布

---

## 三、数据可视化

### 1. **边界框标注**
每张图像的标注包含恶性病灶区域的**矩形边界框（Bounding Box）**，标注格式为COCO JSON格式，包含：
- 边界框坐标 `[x, y, width, height]`
- 目标类别ID (固定为1)
- 边界框面积
- 图像ID和标注ID

### 2. **标注特征统计**
- **边界框面积范围**：18,880 - 934,059 像素²
- **平均边界框面积**：176,717 像素²
- **标注密度**：约20%的图像含有恶性病灶标注

---

## 四、文件结构

### 1. **原始COCO格式目录结构**
```
RSNA-BSD1K/
├── annotations/                    # 标注文件目录
│   ├── instances_full.json        # 训练集标注 (COCO格式)
│   └── instances_val2017.json     # 验证集标注 (COCO格式)
├── full2017/                      # 训练图像目录
│   └── *.png                      # 993张训练图像
└── val2017/                       # 验证图像目录
    └── *.png                      # 107张验证图像 (实际19张可用)
```

### 2. **转换后YOLO格式目录结构**
```
RSNA-BSD1K-YOLO/
├── train/                         # 训练集 (794张图像, 80%)
│   ├── images/                    # 训练图像
│   └── labels/                    # 训练标签 (.txt格式)
├── val/                           # 验证集 (99张图像, 10%)
│   ├── images/                    # 验证图像
│   └── labels/                    # 验证标签
├── test/                          # 测试集 (100张图像, 10%)
│   ├── images/                    # 测试图像
│   └── labels/                    # 测试标签
├── data.yaml                      # YOLO配置文件
└── classes.txt                    # 类别文件
```

> **数据集转换说明**：
> - 原始COCO格式数据已转换为YOLO格式，按8:1:1比例重新划分
> - 转换过程保持了标注分布的平衡性
> - 支持YOLOv5/YOLOv8等框架直接使用

### 3. **核心文件说明**

#### **COCO格式文件（原始）**
- **`instances_full.json`**: 训练集COCO格式标注文件
  - 包含993张图像的元信息
  - 包含203个恶性病灶的边界框标注
  
- **`instances_val2017.json`**: 验证集COCO格式标注文件
  - 包含107张图像的元信息
  - 包含19个恶性病灶的边界框标注

#### **YOLO格式文件（转换后）**
- **`data.yaml`**: YOLO配置文件
  ```yaml
  train: train/images
  val: val/images
  test: test/images
  nc: 1
  names: ['mal']
  ```

- **`classes.txt`**: 类别文件
  ```
  mal
  ```

- **标签文件格式**: 每张图像对应一个`.txt`文件
  ```
  # YOLO格式: class_id x_center y_center width height (归一化坐标)
  0 0.5234 0.3456 0.1234 0.0987
  ```

#### **图像文件**
- **原始格式**: 训练图像993张，验证图像19张可用
- **YOLO格式**: 按8:1:1重新划分为794/99/100张

### 4. **标注格式说明**

#### **COCO格式（原始）**
```json
{
    "categories": [{"id": 1, "name": "mal", "supercategory": null}],
    "images": [
        {
            "file_name": "1029551380.png",
            "height": 2677.5,
            "width": 2457.5,
            "id": 0,
            "depth": 3
        }
    ],
    "annotations": [
        {
            "id": 1,
            "image_id": 0,
            "category_id": 1,
            "iscrowd": 0,
            "area": 176717.2,
            "bbox": [x, y, width, height],  # 绝对坐标
            "segmentation": null
        }
    ]
}
```

#### **YOLO格式（转换后）**
```
# 每行一个目标，格式：class_id x_center y_center width height
# 所有坐标均为相对于图像尺寸的归一化值 (0-1)
0 0.5234 0.3456 0.1234 0.0987
```

**转换公式**：
- `x_center = (bbox_x + bbox_width/2) / image_width`
- `y_center = (bbox_y + bbox_height/2) / image_height`
- `width = bbox_width / image_width`
- `height = bbox_height / image_height`

---

## 五、数据处理与优化

### 1. **数据集特点**
- **高分辨率**：保持乳腺X线影像的诊断质量
- **标准格式**：采用COCO标准格式，便于集成
- **专业标注**：由放射科专业人员完成病灶标注
- **类别稀疏**：仅20%图像含有阳性病灶，体现实际临床分布

### 2. **使用建议**
### 2. **使用建议**

#### **格式选择**
- **COCO格式**：适用于需要详细元信息的研究，支持COCO API
- **YOLO格式**：适用于YOLO系列模型训练，即开即用
- **数据划分**：YOLO格式提供了更合理的8:1:1划分方案

#### **数据预处理**
- **图像尺寸**：考虑标准化为统一尺寸（如640×640, 1024×1024）
- **数据增强**：应用旋转、翻转、缩放等增强技术
- **类别平衡**：处理正负样本不平衡问题（约19%阳性样本）

#### **模型训练策略**
- **YOLO训练**：
  ```python
  # 使用data.yaml配置文件
  python train.py --data RSNA-BSD1K-YOLO/data.yaml --epochs 100
  ```
- **损失函数**：使用focal loss处理样本不平衡
- **多尺度训练**：处理不同大小的病灶
- **交叉验证**：提高模型泛化能力

#### **评估与验证**
- **关键指标**：
  - Recall(敏感性)：避免漏诊，临床关键指标
  - FROC曲线：医学影像检测标准评估
  - mAP@0.5：目标检测通用指标
- **数据集使用**：
  - 训练集：794张图像用于模型训练
  - 验证集：99张图像用于超参数调优
  - 测试集：100张图像用于最终性能评估

---

## 六、应用场景

### 1. **临床应用**
- **乳腺癌筛查**：辅助放射科医师识别可疑病灶
- **CAD系统**：开发计算机辅助诊断系统
- **双读模式**：作为第二意见提供者
- **教学培训**：用于医学影像诊断教学

### 2. **研究应用**
- **算法开发**：开发新的深度学习检测算法
- **基准测试**：作为乳腺癌检测模型的基准数据集
- **多模态融合**：结合其他影像模态进行研究
- **临床验证**：验证AI系统的临床适用性

### 3. **技术挑战**
- **小目标检测**：病灶相对于整个乳腺区域较小
- **假阳性控制**：需要在保持敏感性的同时控制假阳性率
- **多样性处理**：处理不同乳腺密度和病灶形态的多样性

---

## 七、相关研究与扩展

### 1. **相关数据集**
- **DDSM**：Digital Database for Screening Mammography
- **INbreast**：乳腺影像数据集
- **CBIS-DDSM**：DDSM的标准化版本
- **VinDr-Mammo**：越南乳腺影像数据集

### 2. **技术发展方向**
- **多尺度检测**：处理不同大小的病灶
- **弱监督学习**：减少对精确标注的依赖
- **跨域适应**：提高模型在不同设备间的泛化能力
- **可解释性**：增强AI诊断的可解释性

### 3. **评估标准**
- **FROC分析**：Free-Response Operating Characteristic
- **敏感性分析**：不同病灶大小的检测敏感性
- **临床一致性**：与放射科医师诊断的一致性评估

---

## 八、引用与参考

### 1. **数据集引用**
```bibtex
@misc{rsna_bsd1k,
    title={RSNA Breast Screening Detection Challenge Dataset},
    author={RSNA},
    year={2017},
    publisher={Radiological Society of North America},
    url={https://www.rsna.org/}
}
```

### 2. **相关资源**
- **RSNA官网**：[https://www.rsna.org/](https://www.rsna.org/)
- **乳腺影像研究**：相关学术论文和技术报告
- **COCO格式文档**：[https://cocodataset.org/](https://cocodataset.org/)

---

## 九、使用许可与声明

本数据集用于学术研究和教育目的。使用时请：
- 遵循医学数据使用的伦理规范
- 尊重患者隐私和数据安全
- 引用原始数据来源
- 遵循RSNA的使用条款
