# Gynecology-MRI 数据集清理报告

**清理日期**: 2025年6月6日  
**数据集路径**: `D:\dataSets\gynecology_mri`

## 一、清理前数据分析

### 原始类别分布
| 类别ID | 类别名称 | 训练集 | 验证集 | 测试集 | 总计 | 占比 |
|--------|----------|--------|--------|--------|------|------|
| 0 | 6W (6周胎儿) | 3 | 2 | 1 | 6 | 0.2% |
| 1 | 7W (7周胎儿) | 1 | 0 | 0 | 1 | 0.0% |
| 2 | EH (子宫内膜增生) | 2119 | 524 | 252 | 2895 | 99.8% |

### 问题分析
- **6W类别**: 仅有6个标注，极度不平衡
- **7W类别**: 仅有1个标注，无法进行有效训练
- **EH类别**: 占据绝大多数标注，是主要检测目标

## 二、清理策略

### 清理标准
- **最小样本数阈值**: 10个标注
- **保留类别**: EH (子宫内膜增生)
- **移除类别**: 6W, 7W

### 清理操作
1. **备份创建**: 自动创建 `gynecology_mri_backup` 备份目录
2. **标签重映射**: 将EH类别从ID=2重映射为ID=0
3. **文件删除**: 删除包含6W和7W标注的图片和标签文件
4. **配置更新**: 更新 `classes.txt` 和 `data.yaml` 文件

## 三、清理结果

### 处理统计
- **删除文件数**: 12个 (6个图片文件 + 6个标签文件)
- **更新标签文件数**: 2895个
- **保留图片总数**: 2895张

### 清理后数据分布
| 数据集 | 图片数量 | 标注框数量 | 平均每张图片标注数 |
|--------|----------|------------|-------------------|
| 训练集 | 2119 | 2119 | 1.00 |
| 验证集 | 524 | 524 | 1.00 |
| 测试集 | 252 | 252 | 1.00 |
| **总计** | **2895** | **2895** | **1.00** |

### 最终类别信息
| 类别ID | 类别名称 | 描述 | 标注数量 | 占比 |
|--------|----------|------|----------|------|
| 0 | EH | 子宫内膜增生 | 2895 | 100.0% |

## 四、配置文件更新

### classes.txt
```
EH
```

### data.yaml
```yaml
train: ../train/images
val: ../valid/images
test: ../test/images
nc: 1
names: ['EH']
roboflow:
  workspace: roboflow-100
  project: gynecology-mri
  version: 2
  license: CC BY 4.0
  url: https://universe.roboflow.com/roboflow-100/gynecology-mri/dataset/2
```

## 五、数据集特点更新

### 清理后优势
- **类别平衡**: 消除了极度不平衡的问题
- **数据质量**: 保留了高质量的EH类别标注
- **训练效果**: 单类别检测更适合实际医学应用场景
- **模型稳定性**: 避免了少样本类别对模型训练的负面影响

### 使用建议
- **专注应用**: 该数据集现在专门用于子宫内膜增生(EH)的检测
- **模型训练**: 可以使用单类别目标检测算法进行训练
- **数据增强**: 建议使用适合医学影像的数据增强方法
- **评估指标**: 关注mAP、精确率、召回率等指标

## 六、清理脚本信息

**使用的清理脚本**: `clean_gynecology_dataset.py`  
**执行命令**: `python clean_gynecology_dataset.py "D:\dataSets\gynecology_mri" --min_samples 10`  
**备份位置**: `D:\dataSets\gynecology_mri_backup`

---

**总结**: 数据集清理成功完成，原始3类别减少为1个高质量类别(EH)，总计保留2895张高质量标注图像，适合进行子宫内膜增生的目标检测任务。
